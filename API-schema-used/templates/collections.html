{% extends "layout.html" %}
{% block body %}
<style>
    .h2 {
        height: 80px;
    }

    .h3 {
        height: 80px;
    }

    .section {
        height: 80px;
    }

    .container {
        height: 100vh;
        overflow: hidden;
    }

    .row {
        height: calc(100% - 320px);
        position: relative;
    }

    .column {
        position: relative;
        float: left;
        width: 50%;
        height: 100%;
    }

    #left {
        float: left;
        width: 50%;
        overflow: auto;
    }

    #right {
        float: left;
        width: 50%;
    }

    /* Clear floats after the columns */
    .row:after {
        height: 100%;
        content: "";
        display: table;
        clear: both;
    }

    .footer {
        height: 80px;
    }


</style>
<div class="section bg-gray">
    <ul class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="{{ url_for('root') }}">/ home</a>
        </li>
        <li class="breadcrumb-item">
            <a href="{{ url_for('collections') }}">collections</a>
        </li>
    </ul>
</div>

<div class="row">
    <div class="column" id="left">
        <h2>Collections available:</h2>
        <table class="table table-striped table-hover">
            <tr>
                <th>Name</th>
                <th>Description</th>
            </tr>
            {% for d in datasets['collections'] %}
            <tr>
                <td><a href="{{ url_for('collections') }}{{ d['id'] }}">{{ d['id'] }}</a></td>
                <td>{{ d['description'] }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="column" id="right">
        <div id="bbox_table">
            <table class="table table-striped table-hover">

                    <td>Select bounding box</td>
                    <td>
                        <div class="columns col-oneline">
                            <input class="form-input" type="text" id="epsg" placeholder="EPSG">
                            <a id="bbox_confirm" href="{{ url_for('collections') }}">
                                <button class="btn btn-primary">Confirm</button>
                            </a>

                        </div>

                        <div class="columns col-oneline">
                            <input class="form-input" type="text" id="minY" placeholder="minimum Y ">
                            <input class="form-input" type="text" id="minX" placeholder="minimum X">
                        </div>
                        <div class="columns col-oneline">
                            <input class="form-input" type="text" id="maxY" placeholder="maximum Y">
                            <input class="form-input" type="text" id="maxX" placeholder="maximum X">
                        </div>


                    </td>
                </tr>
            </table>
        </div>
        <div>
            {% include 'visualise_cols_bbox.html' %}

        </div>
    </div>
</div>

<script>
        $("#bbox_confirm").click(function () {
        let minX = $('#minX').val();
        let minY = $('#minY').val();
        let maxX = $('#maxX').val();
        let maxY = $('#maxY').val();
        let epsg = $('#epsg').val();

        this.href = this.href + "/?bbox=" + minX + ',' + minY + ',' + maxX + ',' + maxY + '&epsg=' + epsg;
    });
</script>
{% endblock %}